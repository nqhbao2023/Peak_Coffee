rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // ===== MENU ITEMS (Public Read & Write) =====
    // Cho phép tất cả đọc và ghi vì app không dùng Firebase Auth
    match /menu/{itemId} {
      allow read, write: if true;
    }
    
    // ===== ORDERS (Public Read & Write) =====
    // Khách vãng lai cũng có thể đặt hàng
    match /orders/{orderId} {
      allow read, write: if true;
    }
    
    // ===== USERS (Public Read & Write) =====
    // App dùng phone-based auth, không có Firebase Auth tokens
    match /users/{userId} {
      allow read, write: if true;
    }
    
    // ===== DEBT RECORDS (Public Read & Write) =====
    match /debts/{debtId} {
      allow read, write: if true;
    }
    
    // ===== CUSTOMERS (Public Read & Write) =====
    match /customers/{customerId} {
      allow read, write: if true;
    }
  }
}
